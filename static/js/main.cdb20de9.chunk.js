(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{32:function(e,t,a){e.exports=a(48)},37:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),i=a(21),o=(a(37),a(12)),u=a(4),s=a(5),d=a(7),m=a(6),p=a(2),h=a(17),E=a(16),b=a(14),v=a.n(b),f=a(19);function y(){return j.apply(this,arguments)}function j(){return(j=Object(f.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://economia.awesomeapi.com.br/json/all",e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).validEmail=function(e){return/^[\w+.]+@\w+\.\w{2,}(?:\.\w{2})?$/.test(e)},n.handleChange=function(e){var t=n.state,a=t.email,r=t.senha,l=e.target,c=l.name,i=l.value;n.setState(Object(h.a)({},c,i),(function(){var e=r.length>=5,t=n.validEmail(a);n.setState({buttonDisabled:!(e&&t)})}))},n.handleClick=function(){var e=Object(E.a)(n);(0,e.props.saveUser)(e.state.email),n.setState({redirect:!0})},n.state={email:"",senha:"",buttonDisabled:!0,redirect:!1},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.senha,n=e.buttonDisabled,l=e.redirect;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"TrybeWallet"),l&&r.a.createElement(p.a,{to:"/wallet-conversor/carteira"}),r.a.createElement("fildset",null,r.a.createElement("label",{htmlFor:"email"},"Email",r.a.createElement("br",null),r.a.createElement("input",{label:"Email: ",type:"email",name:"email",id:"email",onChange:this.handleChange,value:t,"data-testid":"email-input",required:!0})),r.a.createElement("label",{htmlFor:"senha"},"Senha",r.a.createElement("br",null),r.a.createElement("input",{label:"Senha: ",type:"password",name:"senha",id:"senha",onChange:this.handleChange,value:a,"data-testid":"password-input",required:!0})),r.a.createElement("button",{label:"Entrar",type:"button",disabled:n,onClick:this.handleClick},"Entrar")))}}]),a}(r.a.Component),g=Object(o.b)(null,(function(e){return{saveUser:function(t){return e({type:"USER_INFO",payload:t})}}}))(O),C=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.expenses;return r.a.createElement("div",{className:"data-user"},r.a.createElement("p",{"data-testid":"email-field"},"Email:",t),r.a.createElement("p",{"data-testid":"total-field"},"Despesa total:",a?a.reduce((function(e,t){return e+ +t.value*+t.exchangeRates[t.currency].ask}),0):0),r.a.createElement("p",{"data-testid":"header-currency-field"},"Moeda de c\xe2mbio: BRL"))}}]),a}(n.Component),x=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}),null)(C),w=a(3),T=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("h2",null,"Carregando...")}}]),a}(n.Component),k={value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},A=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.value,r=t.name;n.setState(Object(h.a)({},r,a))},n.handleClick=Object(f.a)(v.a.mark((function e(){var t,a,r,l,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(E.a)(n),a=t.props,r=a.insertExpense,l=a.expenses,e.next=3,y();case 3:c=e.sent,r(Object(w.a)(Object(w.a)({},n.state),{},{exchangeRates:c,id:l.length})),n.setState({value:0,description:""});case 6:case"end":return e.stop()}}),e)}))),n.componentDidMount=function(){(0,n.props.fetchCoins)()},n.state=k,n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.description,n=e.currency,l=e.method,c=e.tag,i=this.props,o=i.isLoading,u=i.currencies;return o||o?r.a.createElement(T,null):r.a.createElement("fieldset",{className:"set-expense"},r.a.createElement("legend",null,"Despesa"),r.a.createElement("label",{htmlFor:"value"},"Valor",r.a.createElement("br",null),r.a.createElement("input",{type:"number",step:"0.01","data-testid":"value-input",id:"value",name:"value",value:t,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("br",null),r.a.createElement("input",{type:"text","data-testid":"description-input",id:"description",name:"description",value:a,onChange:this.handleChange,placeholder:"Descri\xe7\xe3o"})),r.a.createElement("label",{htmlFor:"currency"},"Moeda",r.a.createElement("br",null),r.a.createElement("select",{type:"text","data-testid":"currency-input",name:"currency",id:"currency",value:n,onChange:this.handleChange,required:!0},Object.entries(u).filter((function(e){return"USDT"!==e[0]})).map((function(e,t){return r.a.createElement("option",{key:t,"data-testid":e[0]},e[0])})))),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo",r.a.createElement("br",null),r.a.createElement("select",{type:"text","data-testid":"method-input",name:"method",id:"method",value:l,onChange:this.handleChange,required:!0},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Categoria",r.a.createElement("br",null),r.a.createElement("select",{type:"text","data-testid":"tag-input",name:"tag",id:"tag",value:c,onChange:this.handleChange,required:!0},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Sa\xfade"))),r.a.createElement("button",{type:"button",onClick:this.handleClick},"Adicionar despesa"))}}]),a}(r.a.Component),D=Object(o.b)((function(e){return{isLoading:e.wallet.isLoading,currencies:e.wallet.currencies,expenses:e.wallet.expenses}}),(function(e){return{insertExpense:function(t){return e({type:"CREATE_WALLET_DATA",payload:t})},fetchCoins:function(){return e(function(){var e=Object(f.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"THUNK_FETCH"}),e.prev=1,e.next=4,y();case 4:a=e.sent,t({type:"RETURN_DATA",payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"ERROR_FETCH",payload:e.t0.message.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}}}))(A),L=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){(0,e.props.deleteExpense)(t)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),t&&t.map((function(t){var a=t.id,n=t.description,l=t.tag,c=t.method,i=t.value,o=t.exchangeRates,u=t.currency,s=(+i*+o[u].ask).toFixed(2);return r.a.createElement("tbody",{key:a},r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,(+i).toFixed(2)),r.a.createElement("td",null,o[u].name.split("/")[0]),r.a.createElement("td",null,(+o[u].ask).toFixed(2)),r.a.createElement("td",null,s),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button"},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return e.handleClick(t)}},"Deletar"))))})))}}]),a}(n.Component),R=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:"DELETE_WALLET_DATA",payload:e}}(t))}}}))(L),F=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header-wallet"},r.a.createElement("h1",null,"TrybeWallet")),r.a.createElement("hr",null),r.a.createElement("div",{className:"user-infos-sets"},r.a.createElement(x,null),r.a.createElement(D,null)),r.a.createElement(R,null))}}]),a}(r.a.Component),_=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/wallet-conversor",component:g}),r.a.createElement(p.b,{path:"/wallet-conversor/carteira",component:F}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=a(13),N=a(30),U=a(31),W={email:""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_INFO":return Object(w.a)(Object(w.a)({},e),{},{email:t.payload});default:return e}},H={currencies:[],expenses:[],isLoading:!1,error:""},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_WALLET_DATA":return Object(w.a)(Object(w.a)({},e),{},{expenses:e.expenses.concat(t.payload)});case"DELETE_WALLET_DATA":return Object(w.a)(Object(w.a)({},e),{},{expenses:e.expenses.filter((function(e){return e!==t.payload}))});case"EDIT_WALLET_DATA":return e;case"THUNK_FETCH":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0});case"RETURN_DATA":return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,currencies:t.payload});case"ERROR_FETCH":return Object(w.a)(Object(w.a)({},e),{},{error:t.payload,isLoading:!1});default:return e}},I=Object(S.combineReducers)({user:M,wallet:q}),B=Object(S.createStore)(I,Object(N.composeWithDevTools)(Object(S.applyMiddleware)(U.a)));c.a.render(r.a.createElement(o.a,{store:B},r.a.createElement(i.a,null,r.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.cdb20de9.chunk.js.map